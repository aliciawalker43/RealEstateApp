<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous">
    <link th:href="@{/css/saas-dashboard.css}" rel="stylesheet" />
    <meta charset="UTF-8">
    <title>User Data</title>
</head>
<body>
	
	<div class="container py-4">
	    <div class="dashboard-hero mb-4">
	        <div class="d-flex align-items-center justify-content-between flex-wrap">
	            <div>
	                <h2 class="mb-1 text-white-50"><i class="fa-solid fa-users"> Company List with User Count</h2>
	                
	                <p class="mb-0">Moniter company user usage data.</p>
					<a class="btn btn-light btn-sm text-primary fw-semibold" href="/admin/dashboard">Return Dashboard</a>
	            </div>
		  
		  
				</div>
				</div>

	
	<div class="table-responsive">
	 <div class="container mt-4">
<div>
<a class="btn btn-primary" th:href="@{/admin/users.csv}">
  <i class="fa-solid fa-file-csv"></i> Download Users CSV
</a>

<table class="table">
  <thead>
    <tr>
      <th>Company</th>
      <th>Users</th>
      <th>Export</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="c : ${companies}">
      <td th:text="${c.name}">Company</td>
      <td th:text="${userCounts[c.id] ?: 0}">0</td>
      <td>
        <a class="btn btn-sm btn-outline-primary"
           th:href="@{/admin/users.csv(companyId=${c.id})}">
          Export Users
        </a>
      </td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
 
<div class="footer"><a th:href="@{/admin/dashboard}">Return to Dashboard</a></div>
<div class="footer"><a th:href="@{/logout}">logout</a></div>
</div>
</div>
</body>