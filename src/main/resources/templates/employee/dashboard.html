<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Employee Portal</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/saas-dashboard.css}">
	<link rel="stylesheet" th:href="@{/css/company-theme.css}">
</head>
<body class="bg-light">
	<th:block th:replace="~{fragments/navbar :: navbar}"></th:block>
	<th:block th:replace="~{fragments/company-sidebar :: sidebar}"></th:block> 

	
<div class="container p-4 py-4">
	
    <div class="dashboard-hero mb-4">
        <div class="d-flex align-items-center justify-content-between flex-wrap">
            <div calss="d-flex align-items-center gap-3">
				<div>
                <p class="mb-1 text-white-50">Welcome back</p>
                <h2 class="fw-bold mb-1"><h2 th:text="${company.name}"> Emplyee Dashboard</h2>
                <p class="mb-0">Pay rent, track maintenance, and keep documents in one place.</p>
				<a class="btn btn-primary fw-semibold" href="/employee/profile"> <i class="fa-solid fa-building-user"></i>View Profile</a>
				<a class="btn btn-primary fw-semibold" href="/landlord/email"> <i class="fa-solid fa-envelope"></i>Email Center</a>
			</div>
			</div>
			
        
				
			<div class="text-end">
						<div class="profile-image-section" style="text-align:center; margin-bottom:20px;">

						    <!-- PROFILE IMAGE & PLACEHOLDER -->
							<form th:action="@{/employee/profile/image}"
							      method="post"
							      enctype="multipart/form-data"
							      id="profileImageForm"
							      style="text-align:center;">

							    <label for="profileImageInput"
							           style="
							             display:inline-block;
							             width:140px;
							             height:140px;
							             border-radius:50%;
							             overflow:hidden;
							             cursor:pointer;
							             position:relative;
							             border:2px solid #ddd;
							           ">

							        <!-- Profile image -->
							        <img th:src="${employeeProfile != null and employeeProfile.profileImageUrl != null
							                ? tenantProfile.profileImageUrl + '?v=' + #strings.randomAlphanumeric(8)
							                : '/images/profile-placeholder.png'}"
							             alt="Profile Image"
							             class="
							              profile-img
							             "/>

							        <!-- Hover overlay -->
							        <div style="
							             position:absolute;
							             inset:0;
							             background:rgba(0,0,0,0.45);
							             color:#fff;
							             display:flex;
							             align-items:center;
							             justify-content:center;
							             font-size:13px;
							             opacity:0;
							             transition:opacity .2s;
							           "
							           class="avatar-overlay">
							           Change
							        </div>
							    </label>

							    <!-- Hidden file input -->
							    <input type="file"
							           id="profileImageInput"
							           name="file"
							           accept="image/*"
							           hidden
							           onchange="document.getElementById('profileImageForm').submit();"/>
							</form>

						</div>
			               <p>Click Image to Update Profile Photo.</p>
			           </div>
			       </div>
	</div>
</div>
				
		<div class="container">
			<div class="row g-3 mb-3">
				<section class="card dashboard-card p-3 h-100">
				  <div class="d-flex align-items-center justify-content-between mb-2">
				    <div>
				      <h3 class="mb-0">
				        <i class="fa-regular fa-calendar-days"></i> Next 7 Days
				      </h3>
				      <div class="muted small" th:text="${calStart} + ' → ' + ${calEnd}">Range</div>
				    </div>

				    <div class="d-flex gap-2">
				      <a class="btn btn-outline-primary btn-sm" th:href="@{/landlord/calendar}">
				        <i class="fa-solid fa-up-right-from-square"></i> Full Calendar
				      </a>
				      <a class="btn btn-primary btn-sm" th:href="@{/landlord/calendar/event/add}">
				        <i class="fa-solid fa-plus"></i> Add
				      </a>
				    </div>
				  </div>

				  <div th:if="${eventsByDay == null or eventsByDay.isEmpty()}" class="muted">
				    No scheduled events in the next 7 days.
				  </div>

				  <div th:if="${eventsByDay == null or eventsByDay.isEmpty()}" class="muted">
				    No scheduled events in the next 7 days.
				  </div>

				  <div th:if="${eventsByDay != null and !eventsByDay.isEmpty()}" class="list-group">
				    <div th:each="dayEntry : ${eventsByDay}">
				      <div class="fw-semibold mt-2" th:text="${dayEntry.key}">2026-01-15</div>
				      <a th:each="ev : ${dayEntry.value}"
				         th:if="${ev != null}"
				         th:href="@{/landlord/calendar}"
				         class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
				        <div>
				          <div class="fw-semibold" th:if="${ev.title != null}" th:text="${ev.title}">Maintenance</div>
				          <div class="muted small">
				            <span th:if="${ev.startAt != null}" th:text="${#temporals.format(ev.startAt, 'h:mm a')}">9:00 AM</span>
				            <span th:if="${ev.startAt == null}" class="text-muted">No time</span>
				            <span> • </span>
				            <span th:text="${ev.type}">MAINTENANCE</span>
				            <span th:if="${ev.property != null}"> • </span>
				            <span th:if="${ev.property != null}" th:text="${ev.property.rentalAddress}">123 Main</span>
				          </div>
				        </div>
				        <span class="badge"
				              style="background: var(--brand-soft); color:
				  #111;"
				              th:text="${ev.type}">
				        </span>
				      </a>
				    </div>
				  </div>
				</section>
				</div>
				
				
				
				
    <div class="row g-3 mb-3">
		<div class="col-md-6">
		           <div class="card dashboard-card p-3 h-100">
		               <div class="d-flex justify-content-between align-items-center mb-2">
		                   <h6 class="mb-0"> <i class="fa-solid fa-house"></i> Properties</h6>
		                   <!-- <span class="badge bg-warning text-dark" th:text="${requests.size()}">0</span>-->
		               </div>
		               <p class="small text-muted">View properties and tenant information.</p>
		               <a class="btn btn-outline-primary w-100" href="/landlord/propertyList">View Properties</a>
		           </div>
        </div>
		
        <div class="col-md-6">
            <div class="card dashboard-card p-3 h-100">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="mb-0"> <i class="fa-solid fa-screwdriver-wrench"></i> Maintenance</h6>
                    
                </div>
                <p class="small text-muted">View maintenance request from tenants.</p>
                <a class="btn btn-outline-primary w-100" href="/landlord/maintenance">View Request</a>
            </div>
        </div>
		
		<div class="row g-3 mb-3">
			<div class="col-md-6">
			           <div class="card dashboard-card p-3 h-100">
			               <div class="d-flex justify-content-between align-items-center mb-2">
			                   <h6 class="mb-0"> <i class="fa-solid fa-receipt"></i>  Expense Log</h6>
			                  
			               </div>
			               <p class="small text-muted">Track and add expenses all in one place.</p>
			               <a class="btn btn-outline-primary w-100" href="/landlord/expense">Expense Log</a>
			           </div>
		      </div>
		
        <div class="col-md-6">
            <div class="card dashboard-card p-3 h-100">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="mb-0"> <i class="fa-solid fa-comments"></i> Instant Chat Inbox</h6>
                    <span class="badge bg-info" th:text="${messageCount}">0</span>
                </div>
                <p class="small text-muted">Instant message communication between tenants and management.</p>
                <a class="btn btn-outline-primary w-100" href="/landlord/messages">Open messenger</a>
            </div>
        </div>
    </div>

    
	<!-- New Tabs-->
	
	<div class="row g-3 mb-3">
		<div class="col-md-6">
		           <div class="card dashboard-card p-3 h-100">
		               <div class="d-flex justify-content-between align-items-center mb-2">
		                   <h6 class="mb-0"> <i class="fa-solid fa-credit-card"></i>  Payment History</h6>
		                   <!-- <span class="badge bg-warning text-dark" th:text="${requests.size()}">0</span>-->
		               </div>
		               <p class="small text-muted">View payment history and enter manual payments.</p>
		               <a class="btn btn-outline-primary w-100" href="/landlord/payments/view">View Payments</a>
		           </div>
	       </div>
		
	       <div class="col-md-6">
	           <div class="card dashboard-card p-3 h-100">
	               <div class="d-flex justify-content-between align-items-center mb-2">
	                   <h6 class="mb-0"> <i class="fa-solid fa-file"></i> Documents</h6>
	                   
	               </div>
	               <p class="small text-muted">View documents submissions and upload new documents and asign to tenants.</p>
	               <a class="btn btn-outline-primary w-100" href="/landlord/documents">View Documents</a>
	           </div>
	       </div>
		         </div>
		
	       <div class="col-md-6">
	           <div class="card dashboard-card p-3 h-100">
	               <div class="d-flex justify-content-between align-items-center mb-2">
	                   <h6 class="mb-0"> <i class="fa-solid fa-envelope"></i> Email Center</h6>
	                  <!-- <span class="badge bg-info" th:text="${messageCount}">0</span>-->
	               </div>
	               <p class="small text-muted">Send direct emails to single tenant employees or groups.</p>
	               <a class="btn btn-outline-primary w-100" href="/landlord/email">  Send Email(s)</a>
	           </div>
	       </div>
	   </div>
	   
<!--New tabs end-->
	
	
	
	
	
	
	
	
	
	
	
	
	
	

	
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>